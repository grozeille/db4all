<div ui-view>
  <navbar/>
</div>

<div class="container-fluid" style="padding-top:20px;">

  <div id="modal-link">

  </div>

  <alerts-popup alerts="entityData.alerts"></alerts-popup>

  <div class="row fill-height-substract">

    <div class="col-sm-3">

      <div class="form-group">
        <a type="button" class="btn btn-primary" aria-label="Left Align" ui-sref="entity({projectId: entityData.projectId})" style="margin-right:10px;">
          <span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span> Précédent
        </a>
      </div>
    </div>
    <div class="col-sm-9">

      <div class="form-group" style="height:34px;"> <!-- fix height because pull-right doesn't allow to auto-calculate -->
        <a type="button" class="btn btn-primary pull-right" ng-click="entityData.save()" ng-disabled="entityData.saving">
          <span ng-show="entityData.saving" class="fa fa-spinner fa-spin" style="color: inherit;"></span><span ng-show="!entityData.saving" class="glyphicon glyphicon-save"></span> Sauvegarder
        </a>
      </div>

    </div>
  </div>

  <div class="row fill-height-substract">
    <div class="col-sm-12">
      <query-builder-filter data="entityData.data" filtered-data="entityData.filteredData" group="entityData.queryGroup" fields="entityData.entity.fields">

      </query-builder-filter>
    </div>
  </div>

  <div class="row fill-height-substract">
    <div class="col-sm-12">
      <pre><b>Sélection:</b> {{entityData.currentColumn}}</pre>
    </div>
  </div>

  <div class="row">

    <div class="col-sm-12"  fill-height="fill-height-substract">
      <hot-table hot-id="entity-handsontable"
                 settings="entityData.settings"
                 row-headers="true"
                 col-headers="true"
                 col-widths="entityData.colWidths"
                 min-spare-rows="1"
                 datarows="entityData.filteredData"
                 columns="entityData.columns"
                 on-after-selection="entityData.onAfterSelection">
        
      </hot-table>
    </div>
  </div>


  <!-- END : main-container -->


</div>
